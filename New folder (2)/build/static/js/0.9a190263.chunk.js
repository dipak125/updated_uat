(this["webpackJsonpmy-app"]=this["webpackJsonpmy-app"]||[]).push([[0],{916:function(e,t,a){"use strict";a.r(t);var n=a(14),o=a(15),r=a(18),c=a(17),s=a(0),p=a.n(s),l=a(375),i=a(2),d=a(37),u=a(20),m=a(26),g=a(7),f=a(10),h=a(1),b={otp:"",appCodeRadio:"1"},v=h.object().shape({appCodeRadio:h.number().required("Please select one option"),otp:h.string().when(["appCodeRadio"],{is:function(e){return"1"==e},then:h.string().required("Please enter policy App Code").matches(/^[0-9]*$/,(function(){return"Invalid App code"})).min(6,(function(){return"App code should be minimum 6 characters"})).max(6,(function(){return"App code should be maximum 6 characters"})),otherwise:h.string()})}),y=function(e){Object(r.a)(a,e);var t=Object(c.a)(a);function a(){var e;Object(n.a)(this,a);for(var o=arguments.length,r=new Array(o),c=0;c<o;c++)r[c]=arguments[c];return(e=t.call.apply(t,[this].concat(r))).state={otp:"",errorMsg:"",seconds:180,disable:!0},e.checkOtp=function(t,a){e.props.loadingStart();var n=new FormData,o=Number(t.otp),r={policy_ref_no:e.props.refNumber,app_code:o},c=new f.a;n.append("enc_data",c.encrypt(JSON.stringify(r))),g.a.post("verify-appcode",n).then((function(t){var n=JSON.parse(c.decrypt(t.data));console.log("decrypt",n),0==n.error?(e.setState({errorMsg:""}),a.setSubmitting(!1),e.props.reloadPage(!0)):(a.setSubmitting(!1),e.setState({otp:"",errorMsg:n.msg})),e.props.loadingStop()})).catch((function(t){e.setState({otp:""}),e.props.loadingStop()}))},e.generateOtp=function(){e.props.loadingStart();new FormData;var t=new f.a;e.setState({seconds:180,errorMsg:""}),g.a.get("sent-appcode/".concat(e.props.refNumber)).then((function(a){JSON.parse(t.decrypt(a.data));e.props.loadingStop()})).catch((function(t){e.setState({otp:""}),e.props.loadingStop()}))},e.coundown=function(){e.myInterval=setInterval((function(){e.setState((function(e){return{seconds:e.seconds-1}}))}),1e3)},e.changeError=function(){e.setState({errorMsg:""})},e}return Object(o.a)(a,[{key:"changePlaceHoldClassAdd",value:function(e){e.target.parentElement.classList.add("active")}},{key:"changePlaceHoldClassRemove",value:function(e){var t=e.target.parentElement;0===e.target.value.length&&t.classList.remove("active")}},{key:"componentDidMount",value:function(){this.generateOtp()}},{key:"render",value:function(){var e=this,t=this.state,a=t.otp,n=t.errorMsg;t.seconds,Object.assign(b,{otp:""});return p.a.createElement(i.e,{initialValues:b,onSubmit:this.checkOtp,validationSchema:v},(function(t){var o=t.values,r=t.errors,c=t.setFieldValue,s=t.setFieldTouched,d=(t.isValid,t.isSubmitting),u=t.touched;return e.state.disable=!0,""!=o.otp1&&""!=o.otp2&&""!=o.otp3&&""!=o.otp4&&""!=o.otp5&&(e.state.disable=!1),p.a.createElement(i.d,null,p.a.createElement("div",{className:"text-center boxotpmodl"},p.a.createElement("div",{className:"verfy"},"Digital consent form"),p.a.createElement("div",{className:"mobotp"},"An automated e-mail has been sent to customer with a Policy App code and Proposal link."),p.a.createElement("span",{className:"errorMsg"},a),p.a.createElement("div",{className:"d-flex justify-content-center otpInputWrap mx-auto m-b-25"},p.a.createElement("div",{className:"p-r-25"},p.a.createElement("label",{className:"customRadio3"},p.a.createElement(i.b,{type:"radio",name:"appCodeRadio",value:"1",key:"1",checked:"1"==o.appCodeRadio,onChange:function(){s("appCodeRadio"),c("appCodeRadio","1")}}),p.a.createElement("span",{className:"checkmark "}),p.a.createElement("span",{className:"fs-14"}," Call customer and enter Policy App Code")),r.appCodeRadio&&u.appCodeRadio?p.a.createElement("span",{className:"errorMsg"},r.appCodeRadio):null)),"1"==o.appCodeRadio?p.a.createElement("div",{className:"d-flex justify-content-center otpInputWrap mx-auto m-b-25"},p.a.createElement("div",{className:"insurerName"},p.a.createElement(i.b,{name:"otp",type:"text",autoComplete:"off",className:"premiumslid",value:o.otp,onFocus:function(t){return e.changePlaceHoldClassAdd(t)},onBlur:function(t){return e.changePlaceHoldClassRemove(t)},onChange:function(t){e.changeError(),c("otp",t.target.value)},tabIndex:"1",maxLength:"6"}),r.otp&&u.otp?p.a.createElement("span",{className:"errorMsg"},r.otp):null,n?p.a.createElement("span",{className:"errorMsg"},n):null)):null,p.a.createElement("div",{className:"text-center"},p.a.createElement(l.a,{className:"proceedBtn",type:"button",onClick:e.generateOtp},"ReGenerate App code"),"\xa0\xa0",p.a.createElement(l.a,{className:"proceedBtn",type:"submit"},d?"Wait..":"Submit"))))}))}}]),a}(s.Component);t.default=Object(d.g)(Object(m.b)((function(e){return{loading:e.loader.loading}}),(function(e){return{loadingStart:function(){return e(Object(u.a)())},loadingStop:function(){return e(Object(u.b)())}}}))(y))}}]);