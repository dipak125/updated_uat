(this["webpackJsonpmy-app"]=this["webpackJsonpmy-app"]||[]).push([[3],{1006:function(e,t,a){"use strict";var n=a(51),d=a.n(n),o=a(72),r=a(15),s=a(13),l=a(14),i=a(46),m=a(18),c=a(17),p=a(0),u=a.n(p),_=a(913),f=a(903),E=a(377),g=a(41),v=a.n(g),y=(a(31),a(34),a(40),a(7)),h=a(38),b=a(19),N=a(22),S=(a(3),a(1)),w=a(20),k=a.n(w),O=a(9),F=a(2),D=(a(919),a(988),{makeEndorsement:[],status:""}),C=S.object().shape({makeEndorsement:S.array().of(S.object().shape({New_values:S.string().required("This field is required")})),additionalEndorsement:S.array().of(S.object().shape({addEndorsementInitValues:S.array().of(S.object().shape({add_endorsement_new_value:S.string().required("This field is required")}))})),email_id:S.string().required("This field is required"),mobile_no:S.string().required("This field is required"),product_category:S.string().required("This field is required"),product:S.string().required("This field is required"),policy_no:S.string().required("This field is required"),endorsement_type:S.string().required("This field is required"),endorsement_sub_type:S.string().required("This field is required")}),I=function(e){Object(m.a)(a,e);var t=Object(c.a)(a);function a(e){var n;return Object(s.a)(this,a),(n=t.call(this,e)).check=0,n.forwardNextPage=function(){n.props.history.push("/AdditionalDetails_GSB/".concat(n.props.match.params.productId))},n.getProductCategoryList=function(e){n.props.loadingStart(),y.a.get("/dyi-endorsement/product-category-list").then((function(t){if(0==t.data.error){var a=t.data.data.product_categories?t.data.data.product_categories:[];n.setState({product_category_list:a}),n.getProductList(e[0].endorsement_product_category_id,e)}else n.props.loadingStop()})).catch((function(e){n.setState({product_category_list:[]}),n.props.loadingStop()}))},n.getEndorsementDetails=function(){var e=new FormData;e.append("endorsementdata_id",n.props.endorsementdata_id),n.props.loadingStart(),y.a.post("/dyi-endorsement/details",e).then((function(e){if(0==e.data.error){var t=e.data.data&&e.data.data.details?e.data.data.details:[],a=(e.data.data.details&&e.data.data.details.info&&e.data.data.details.info,e.data.data&&e.data.data.details&&e.data.data.details.documents?e.data.data.details.documents.split(","):[]),d=e.data.data&&e.data.data.details&&e.data.data.details.endorsement_doc_id?e.data.data.details.endorsement_doc_id.split(","):[];n.setState({endorsementDetails:t,documents:a,endorsement_doc_id:d})}n.props.loadingStop()})).catch((function(e){n.setState({product_category_list:[]}),n.props.loadingStop()}))},n.getProductList=function(e,t){var a=new FormData,d=new O.a,o=sessionStorage.getItem("users")?JSON.parse(sessionStorage.getItem("users")):"";o.user&&(o=JSON.parse(d.decrypt(o.user))),a.append("product_category_id",e),a.append("user_id",o.bc_master_id),a.append("is_update",1),a.append("endrosment_data_id",n.state.endorsement_data_id),4==o.login_type?5==o.bc_master_id?a.append("user_type","csc"):(a.append("user_type","bc"),a.append("agent_id",o.user_name)):a.append("user_type",o.user_type),y.a.post("dyi-endorsement/product-list",a).then((function(e){if(0==e.data.error){var a=e.data.data.products?e.data.data.products:[];n.setState({product_list:a,endorsement_info_id:e.data.data.endorsementinfo_id}),n.getEndorsmentList(t)}else n.props.loadingStop()})).catch((function(e){n.setState({product_category_list:[]}),n.props.loadingStop()}))},n.getEndorsementSubtypeList=function(e){for(var t=[],a=function(a){var d=e[a].product_endorsement_type_id,o=new FormData;o.append("endrosment_data_id",n.state.endorsement_data_id),o.append("endorsementinfo_id",e[a].id),o.append("product_endorsement_id",d),o.append("type",1),n.props.loadingStart(),y.a.post("dyi-endorsement/update-endorsement-value",o).then((function(e){t[a]=e.data.data.endorsement_field_value,n.setState({endorsement_sub_type_list:t}),n.props.loadingStop()})).catch((function(e){n.props.loadingStop()}))},d=0;d<e.length;d++)a(d);n.getEndorsementDetails()},n.getEndorsmentList=function(e){var t=e[0].product_id,a=new FormData;a.append("endorsementinfo_id",e[0].id),a.append("product_id",t),y.a.post("dyi-endorsement/endorsement-type-list",a).then((function(t){0==t.data.error?(n.setState({product_endorsement_list:t.data.data.product_endorsement_list}),n.getEndorsementSubtypeList(e)):n.props.loadingStop()})).catch((function(e){n.props.loadingStop()}))},n.getAddEndorsementFields=function(e,t,a,d,o,r,s){var l=new FormData,i=n.state.addEndorsementFields;l.append("endorsementinfo_id",n.state.type2_info_id),l.append("endrosment_data_id",n.state.endorsement_data_id),l.append("field_id",e),l.append("policy_number",t.policy_no),n.props.loadingStart(),y.a.post("dyi-endorsement/fields",l).then((function(e){i[s]=e.data.data.fields,n.additionalEndorsement(t,a,d,o,r),n.props.loadingStop()})).catch((function(e){n.props.loadingStop()}))},n.getEndorsementFields=function(e,t,a,d){var o=new FormData;o.append("endorsementinfo_id",n.state.endorsement_info_id),o.append("endrosment_data_id",n.state.endorsement_data_id),o.append("field_id",e),o.append("policy_number",t.policy_no),n.props.loadingStart(),y.a.post("dyi-endorsement/fields",o).then((function(e){0==e.data.error?(n.setState(Object(r.a)(Object(r.a)({},n.state),{},{endorsementfields:e.data.data.fields})),n.props.loadingStop(),n.initEndorsementUpdate(t,a,d,e.data.data.fields)):n.props.loadingStop()})).catch((function(e){n.props.loadingStop()}))},n.makeAddEndorsementOldField=function(e,t,a,d,o,r){var s=[];n.state.endorsementInfo;return s.push(u.a.createElement(_.a,{key:"oldAdd".concat(r)},u.a.createElement(F.b,{name:"additionalEndorsement[".concat(r,"]add_endorsement_old_value"),type:"text",autoComplete:"off",placeholder:"Additional Old values",className:"formGrp inputfs12",disabled:"discrepancy"!=e.status}),t.additionalEndorsement&&t.additionalEndorsement[r]&&t.additionalEndorsement[r].add_endorsement_old_value&&a.additionalEndorsement&&a.additionalEndorsement[r]&&a.additionalEndorsement[r].add_endorsement_old_value?u.a.createElement("span",{className:"errorMsg"},t.additionalEndorsement[r].add_endorsement_old_value):null)),s},n.makeAddEndorsementNewField=function(e,t,a,d,o,r){var s=[],l=n.state.endorsementInfo,i=l&&l[r]&&l[r].master_fields?JSON.parse(l[r].master_fields):[];return i&&Object.keys(i).map((function(n,d){return s.push(u.a.createElement(_.a,{key:"oldAdd".concat(d)},u.a.createElement(F.b,{name:"additionalEndorsement[".concat(r,"]addEndorsementInitValues[").concat(d,"]add_endorsement_new_value"),type:"text",autoComplete:"off",placeholder:"Additional New ".concat(i[n]),className:"formGrp inputfs12",disabled:"discrepancy"!=e.status}),t.additionalEndorsement&&t.additionalEndorsement[r]&&t.additionalEndorsement[r].addEndorsementInitValues&&t.additionalEndorsement[r].addEndorsementInitValues[d]&&t.additionalEndorsement[r].addEndorsementInitValues[d].add_endorsement_new_value&&a.additionalEndorsement&&a.additionalEndorsement[r]&&a.additionalEndorsement[r].addEndorsementInitValues&&a.additionalEndorsement[r].addEndorsementInitValues[d]&&a.additionalEndorsement[r].addEndorsementInitValues[d].add_endorsement_new_value?u.a.createElement("span",{className:"errorMsg"},t.additionalEndorsement[r].addEndorsementInitValues[d].add_endorsement_new_value):null))})),s},n.makeEndorsementOldField=function(e,t,a,d,o){var r=[],s=n.state.endorsementInfo,l=s&&s[0]&&s[0].master_fields?JSON.parse(s[0].master_fields):[];return l&&Object.keys(l).map((function(n,d){return r.push(u.a.createElement(_.a,{key:"old".concat(d)},u.a.createElement(F.b,{name:"Old_values",type:"text",autoComplete:"off",placeholder:"Old values",className:"formGrp inputfs12",disabled:"discrepancy"!=e.status}),t&&t.Old_values&&a.Old_values?u.a.createElement("span",{className:"errorMsg"},t.Old_values):null))})),r},n.makeEndorsementNewField=function(e,t,a,d,o){var r=[],s=n.state.endorsementInfo,l=s&&s[0]&&s[0].master_fields?JSON.parse(s[0].master_fields):[];return l&&Object.keys(l).map((function(n,d){return r.push(u.a.createElement(_.a,{key:"new".concat(d)},u.a.createElement(F.b,{name:"makeEndorsement[".concat(d,"].New_values"),type:"text",autoComplete:"off",placeholder:"New ".concat(l[n]),className:"formGrp inputfs12",disabled:"discrepancy"!=e.status}),t.makeEndorsement&&t.makeEndorsement[d]&&t.makeEndorsement[d].New_values&&a.makeEndorsement&&a.makeEndorsement[d]&&a.makeEndorsement[d].New_values?u.a.createElement("span",{className:"errorMsg"},t.makeEndorsement[d].New_values):null))})),r},n.initClaimDetailsList=function(){var e=n.state.endorsementInfo,t=[],a=e&&e[0]&&e[0].new_values?JSON.parse(e[0].new_values):[];return a&&Object.keys(a).map((function(e,n){t.push({New_values:a&&a[e]})})),t},n.initAddClaimDetailsList=function(){var e=n.state.endorsementInfo,t=[{new:"",old:""}];if(e.length>1)for(var a=function(a){var n=e&&e[a]&&e[a].new_values?JSON.parse(e[a].new_values):[],d=[];n&&Object.keys(n).map((function(e,t){d.push({add_endorsement_new_value:n&&n[e]})})),t.push({addEndorsementInitValues:d,add_endorsement_type:e&&e.length>0&&e[a].product_endorsement_type_id?e[a].product_endorsement_type_id:"",add_endorsement_sub_type:e&&e.length>0&&e[a].master_endorsement_id?e[a].master_endorsement_id:"",add_endorsement_received_date:e&&e.length>0&&e[a].req_receive_date?new Date(e[a].req_receive_date):"",add_endorsement_old_value:e&&e.length>0&&e[a].old_values?e[a].old_values:""})},d=1;d<e.length;d++)a(d);return t},n.initEndorsementUpdate=function(){var e=Object(o.a)(d.a.mark((function e(t,a,n,o){var r;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=[],o&&Object.keys(o).map((function(e,t){r.push({New_values:""})})),n("makeEndorsement",r);case 3:case"end":return e.stop()}}),e)})));return function(t,a,n,d){return e.apply(this,arguments)}}(),n.onFileChange=function(){var e=Object(o.a)(d.a.mark((function e(t,a,o,r){var s,l,i;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t[0]||""===t[0].name){e.next=13;break}if(s=t[0].size,o("fileData[".concat(r,"]uploadFile")),a("fileData[".concat(r,"]uploadFile"),s),!(s<=2097152)){e.next=11;break}l=t[0],i=t[0].name,n.state.selectedFile=l,n.state.selectedFileName=i,e.next=13;break;case 11:return e.next=13,n.setState({selectedFile:[],selectedFileName:[]});case 13:case"end":return e.stop()}}),e)})));return function(t,a,n,d){return e.apply(this,arguments)}}(),n.upload=function(){var e=new FormData;e.append("endorsementinfo_id",n.state.endorsement_info_id),e.append("endrosment_data_id",n.state.endorsement_data_id),e.append("attachment_file[0]",n.state.selectedFile),n.props.loadingStart(),y.a.post("dyi-endorsement/document",e).then((function(e){k()(e.data.msg),n.getEndorsementDetails()})).catch((function(e){k()(e.data.msg),n.props.loadingStop()}))},n.Delete=function(e){var t=new FormData;t.append("doc_id",e),t.append("endorsementdata_id",n.state.endorsement_data_id),k()({title:"Do you want to delete document",icon:"warning",dangerMode:!0}).then((function(e){e&&(n.props.loadingStart(),y.a.post("dyi-endorsement/delete-document",t).then((function(e){k()(e.data.msg).then((function(e){e&&n.getEndorsementDetails()}))})).catch((function(e){n.props.loadingStop()})))}))},n.deleteEndorsement=function(e,t){var a=new FormData;a.append("endorsementdata_id",e[t].endrosmentdata_id),a.append("endrosment_id",e[t].endrosment_id),k()({title:"Do you want to delete endorsement",icon:"warning",dangerMode:!0}).then((function(e){e&&(n.props.loadingStart(),y.a.post("dyi-endorsement/delete",a).then((function(e){0==e.data.error?k()(e.data.msg).then((function(e){e&&n.props.updateList()})):(k()(e.data.msg),n.props.loadingStop())})).catch((function(e){n.props.loadingStop()})))}))},n.getAddEndorsementSubTypeList=function(e,t,a,d,o,r,s){var l=n.state.additionalEndorsement_sub_type_list,i=new FormData;i.append("endrosment_data_id",n.state.endorsement_data_id),i.append("endorsementinfo_id",n.state.endorsement_info_id),i.append("product_endorsement_id",e),i.append("type",2),n.props.loadingStart(),y.a.post("dyi-endorsement/update-endorsement-value",i).then((function(e){l[s]=e.data.data.endorsement_field_value,n.setState({type2_info_id:e.data.data.new_endorsement_info}),n.additionalEndorsement(t,a,d,o,r),n.props.loadingStop()})).catch((function(e){n.props.loadingStop()}))},n.handleSubmit=function(e,t){var a=new FormData;a.append("user_email",e.email_id),a.append("user_mobile",e.mobile_no),a.append("endorsementdata_id",n.state.endorsement_data_id);var d=[];e.makeEndorsement&&e.makeEndorsement.length>0&&e.makeEndorsement.map((function(e,t){d.push(e.New_values)})),a.append("new_endrosment_values",JSON.stringify(d)),a.append("old_endrosment_values",JSON.stringify(e.Old_values)),e.additionalEndorsement&&e.additionalEndorsement.length>0&&e.additionalEndorsement.map((function(e,t){var n=[];t>0&&(e.addEndorsementInitValues&&e.addEndorsementInitValues.length>0&&e.addEndorsementInitValues.map((function(e,t){n.push(e.add_endorsement_new_value)})),a.append("new_additional_endrosment_values[".concat(t-1,"]"),JSON.stringify(n)),a.append("old_additional_endrosment_values[".concat(t-1,"]"),e.add_endorsement_old_value))})),"discrepancy"==e.status?(n.props.loadingStart(),y.a.post("dyi-endorsement/update",a).then((function(e){0==e.data.error?(k()({title:e.data.msg,text:"Serial number: "+e.data.data.sr_no,icon:"success",dangerMode:!1}).then((function(e){e&&(t.setSubmitting(!1),t.resetForm(!0),n.props.updateList())})),n.props.loadingStop()):(k()(e.data.msg),n.props.loadingStop())})).catch((function(e){n.props.loadingStop()}))):k()("Values can not be updated")},n.endorsement=function(e,t,a,d,o,r){var s=[],l=n.state,i=(l.endorsementfields,l.endorsement_sub_type_list),m=l.product_endorsement_list;return s.push(u.a.createElement(_.a,{key:2},u.a.createElement(f.a,{className:"row formSection"},u.a.createElement("label",{className:"col-md-3"},"Endorsement Type:"),u.a.createElement("div",{className:"col-md-4"},u.a.createElement("div",{className:"formSection"},u.a.createElement(F.b,{name:"endorsement_type",component:"select",autoComplete:"off",className:"formGrp inputfs12",value:e.endorsement_type,disabled:!0},u.a.createElement("option",{value:""},"List Of Endorsement Type "),m&&m.map((function(e){return u.a.createElement("option",{value:e.id,key:e.id},e.endorsement_type_name)}))),t.endorsement_type?u.a.createElement("span",{className:"errorMsg"},t.endorsement_type):null))),u.a.createElement(f.a,{className:"row formSection"},u.a.createElement("label",{className:"col-md-3"},"Endorsement Sub type:"),u.a.createElement("div",{className:"col-md-4"},u.a.createElement("div",{className:"formSection"},u.a.createElement(F.b,{name:"endorsement_sub_type",component:"select",autoComplete:"off",className:"formGrp inputfs12",value:e.endorsement_sub_type,disabled:!0},u.a.createElement("option",{value:""},"List Of Endorsement Sub Type "),i&&i.length>0&&i[0]&&i[0].length>0&&i[0].map((function(e){return u.a.createElement("option",{value:e.id,key:e.id},e.Sub_Type)}))),t.endorsement_sub_type?u.a.createElement("span",{className:"errorMsg"},t.endorsement_sub_type):null))),u.a.createElement(f.a,{className:"row formSection"},u.a.createElement("label",{className:"col-md-3"},"Request Receive Date:"),u.a.createElement("div",{className:"col-md-4"},u.a.createElement("div",{className:"formSection"},u.a.createElement(v.a,{name:"endorsement_received_date",dateFormat:"dd MMM yyyy",placeholderText:"Request Receive Date",peekPreviousMonth:!0,peekPreviousYear:!0,showMonthDropdown:!0,showYearDropdown:!0,dropdownMode:"select",className:"datePckr",selected:e.endorsement_received_date,disabled:!0,onChange:function(e){d("endorsement_received_date"),o("endorsement_received_date",e)}}),t.endorsement_received_date?u.a.createElement("span",{className:"errorMsg"},t.endorsement_received_date):null))),u.a.createElement(f.a,{className:"row formSection"},u.a.createElement("label",{className:"col-md-3"},"Old Value:"),u.a.createElement("div",{className:"col-md-4"},u.a.createElement("div",{className:"formSection"},n.makeEndorsementOldField(e,t,a,d,o)))),u.a.createElement(f.a,{className:"row formSection"},u.a.createElement("label",{className:"col-md-3"},"New Value:"),u.a.createElement("div",{className:"col-md-4"},u.a.createElement("div",{className:"formSection"},n.makeEndorsementNewField(e,t,a,d,o)))))),s},n.additionalEndorsement=function(e,t,a,d,o){for(var r=n.state,s=r.endorsementInfo,l=(r.add_endorsement_received_date,r.count),m=r.product_endorsement_list,c=r.endorsement_sub_type_list,p=[],g=1;g<=l;g++)p.push(u.a.createElement(_.a,{key:g},u.a.createElement(f.a,{className:"row formSection"},u.a.createElement("label",{className:"col-md-3"},"Endorsement Type:"),u.a.createElement("div",{className:"col-md-4"},u.a.createElement("div",{className:"formSection"},u.a.createElement(F.b,{name:"additionalEndorsement[".concat(g,"]add_endorsement_type"),component:"select",autoComplete:"off",className:"formGrp inputfs12",disabled:!0},u.a.createElement("option",{value:""},"List Of Endorsement Type "),m&&m.map((function(e){return u.a.createElement("option",{value:e.id,key:e.id},e.endorsement_type_name)}))),t.additionalEndorsement&&t.additionalEndorsement[g]&&t.additionalEndorsement[g].add_endorsement_type&&a.additionalEndorsement&&a.additionalEndorsement[g]&&a.additionalEndorsement[g].add_endorsement_type?u.a.createElement("span",{className:"errorMsg"},t.additionalEndorsement[g].add_endorsement_type):null))),u.a.createElement(f.a,{className:"row formSection"},u.a.createElement("label",{className:"col-md-3"},"Endorsement Sub type:"),u.a.createElement("div",{className:"col-md-4"},u.a.createElement("div",{className:"formSection"},u.a.createElement(F.b,{name:"additionalEndorsement[".concat(g,"]add_endorsement_sub_type"),component:"select",autoComplete:"off",className:"formGrp inputfs12",disabled:!0},u.a.createElement("option",{value:""},"List Of Endorsement Sub Type "),c&&c.length>0&&c[g]&&c[g].length>0&&c[g].map((function(e){return u.a.createElement("option",{value:e.id,key:e.id},e.Sub_Type)}))),t.additionalEndorsement&&t.additionalEndorsement[g]&&t.additionalEndorsement[g].add_endorsement_sub_type&&a.additionalEndorsement&&a.additionalEndorsement[g]&&a.additionalEndorsement[g].add_endorsement_sub_type?u.a.createElement("span",{className:"errorMsg"},t.additionalEndorsement[g].add_endorsement_sub_type):null))),u.a.createElement(f.a,{className:"row formSection"},u.a.createElement("label",{className:"col-md-3"},"Request Receive Date:"),u.a.createElement("div",{className:"col-md-4"},u.a.createElement("div",{className:"formSection"},u.a.createElement(v.a,{name:"additionalEndorsement[".concat(g,"]add_endorsement_received_date"),dateFormat:"dd MMM yyyy",placeholderText:"Request Receive Date",peekPreviousMonth:!0,peekPreviousYear:!0,showMonthDropdown:!0,showYearDropdown:!0,dropdownMode:"select",className:"datePckr",selected:e.additionalEndorsement[g].add_endorsement_received_date}),t.additionalEndorsement&&t.additionalEndorsement[g]&&t.additionalEndorsement[g].add_endorsement_received_date&&a.additionalEndorsement&&a.additionalEndorsement[g]&&a.additionalEndorsement[g].add_endorsement_received_date?u.a.createElement("span",{className:"errorMsg"},t.additionalEndorsement[g].add_endorsement_received_date):null))),u.a.createElement(f.a,{className:"row formSection"},u.a.createElement("label",{className:"col-md-3"},"Old Value:"),u.a.createElement("div",{className:"col-md-4"},u.a.createElement("div",{className:"formSection"},n.makeAddEndorsementOldField(e,t,a,d,o,g),t.additionalEndorsement&&t.additionalEndorsement[g]&&t.additionalEndorsement[g].add_endorsement_old_value?u.a.createElement("span",{className:"errorMsg"},t.additionalEndorsement[g].add_endorsement_old_value):null))),u.a.createElement(f.a,{className:"row formSection"},u.a.createElement("label",{className:"col-md-3"},"New Value:"),u.a.createElement("div",{className:"col-md-4"},u.a.createElement("div",{className:"formSection"},n.makeAddEndorsementNewField(e,t,a,d,o,g),t.additionalEndorsement&&t.additionalEndorsement[g]&&t.additionalEndorsement[g].add_endorsement_new_value?u.a.createElement("span",{className:"errorMsg"},t.additionalEndorsement[g].add_endorsement_new_value):null))),u.a.createElement(f.a,{className:"row formSection"},u.a.createElement(E.a,{className:"proceedBtn",type:"button",onClick:n.deleteEndorsement.bind(Object(i.a)(n),s,g)},"Delete Endorsement"))));return p},n.state={product_category_list:[],product_list:[],request_receive_date:[],selectedFile:[],endorsement_info_id:[],endorsement_data_id:n.props.endorsementdata_id,product_endorsement_list:[],endorsement_sub_type_list:[],endorsementfields:{},addEndorsementFields:[],additionalEndorsement_sub_type_list:[],endorsement_array:[],type2_info_id:"",count:n.props.endorsementInfo.length-1,add_endorsement_received_date:[],endorsementDetails:[],endorsementInfo:n.props.endorsementInfo,documents:[],endorsement_doc_id:[],Document_List:n.props.endorsementInfo&&"Yes"==n.props.endorsementInfo[0].field.Document_Required?n.props.endorsementInfo[0].field.Document_List.split("/"):[]},n}return Object(l.a)(a,[{key:"changePlaceHoldClassAdd",value:function(e){e.target.parentElement.classList.add("active")}},{key:"changePlaceHoldClassRemove",value:function(e){var t=e.target.parentElement;0===e.target.value.length&&t.classList.remove("active")}},{key:"componentDidMount",value:function(){this.getProductCategoryList(this.props.endorsementInfo)}},{key:"render",value:function(){var e=this,t=this.state,a=t.product_category_list,n=t.product_list,d=t.count,o=t.endorsementDetails,r=t.endorsementInfo,s=t.documents,l=t.endorsement_doc_id,i=t.Document_List,m=Object.assign(D,{makeEndorsement:this.initClaimDetailsList(),additionalEndorsement:this.initAddClaimDetailsList(),product_category:r&&r.length>0&&r[0].endorsement_product_category_id?r[0].endorsement_product_category_id:"",product:r&&r.length>0&&r[0].product_id?r[0].product_id:"",policy_no:o&&r.length>0&&o.policy_no?o.policy_no:"",endorsement_type:r&&r.length>0&&r[0].product_endorsement_type_id?r[0].product_endorsement_type_id:"",endorsement_sub_type:r&&r.length>0&&r[0].master_endorsement_id?r[0].master_endorsement_id:"",newCount:d,email_id:o&&r.length>0&&o.email?o.email:"",mobile_no:o&&r.length>0&&o.mobile?o.mobile:"",endorsement_received_date:r&&r.length>0&&r[0].req_receive_date?new Date(r[0].req_receive_date):"",Old_values:r&&r.length>0&&r[0].old_values?r[0].old_values:"",status:o&&r.length>0&&o.endorsement_status?o.endorsement_status:""});return u.a.createElement(u.a.Fragment,null,u.a.createElement("div",null,u.a.createElement("section",{className:"brand"},u.a.createElement("div",{className:"boxpd"},u.a.createElement(F.e,{initialValues:m,onSubmit:this.handleSubmit,validationSchema:C},(function(t){var d=t.values,r=t.errors,m=t.setFieldValue,c=t.setFieldTouched,p=(t.isValid,t.isSubmitting),_=t.touched;return u.a.createElement(F.d,null,u.a.createElement("div",{className:"brandhead"},u.a.createElement(f.a,{className:"row formSection"},u.a.createElement("label",{className:"col-md-3"},"Email Address:"),u.a.createElement("div",{className:"col-md-4"},u.a.createElement("div",{className:"formSection"},u.a.createElement(F.b,{name:"email_id",type:"text",autoComplete:"off",placeholder:"Email Address",className:"formGrp inputfs12",value:d.email_id,disabled:"discrepancy"!=d.status}),r.email_id&&_.email_id?u.a.createElement("span",{className:"errorMsg"},r.email_id):null))),u.a.createElement(f.a,{className:"row formSection"},u.a.createElement("label",{className:"col-md-3"},"Mobile Number:"),u.a.createElement("div",{className:"col-md-4"},u.a.createElement("div",{className:"formSection"},u.a.createElement(F.b,{name:"mobile_no",type:"text",autoComplete:"off",placeholder:"Mobile Number",className:"formGrp inputfs12",value:d.mobile_no,disabled:"discrepancy"!=d.status}),r.mobile_no&&_.mobile_no?u.a.createElement("span",{className:"errorMsg"},r.mobile_no):null))),u.a.createElement(f.a,{className:"row formSection"},u.a.createElement("label",{className:"col-md-3"},"Product Category:"),u.a.createElement("div",{className:"col-md-4"},u.a.createElement("div",{className:"formSection"},u.a.createElement(F.b,{name:"product_category",component:"select",autoComplete:"off",className:"formGrp inputfs12",value:d.product_category,disabled:!0},u.a.createElement("option",{value:""},"Select product category"),a&&a.map((function(e,t){return u.a.createElement("option",{value:e.id,key:e.id}," ",e.category_name)}))),r.product_category&&_.product_category?u.a.createElement("span",{className:"errorMsg"},r.product_category):null))),u.a.createElement(f.a,{className:"row formSection"},u.a.createElement("label",{className:"col-md-3"},"Product:"),u.a.createElement("div",{className:"col-md-4"},u.a.createElement("div",{className:"formSection"},u.a.createElement(F.b,{name:"product",component:"select",autoComplete:"off",className:"formGrp inputfs12",value:d.product,disabled:!0},u.a.createElement("option",{value:""},"Select product "),n&&n.map((function(e,t){return u.a.createElement("option",{value:e.id,key:e.id}," ",e.product_name)}))),r.product&&_.product?u.a.createElement("span",{className:"errorMsg"},r.product):null))),u.a.createElement(f.a,{className:"row formSection"},u.a.createElement("label",{className:"col-md-3"},"Policy Number:"),u.a.createElement("div",{className:"col-md-4"},u.a.createElement("div",{className:"formSection"},u.a.createElement(F.b,{name:"policy_no",type:"text",autoComplete:"off",placeholder:"Policy Number",className:"formGrp inputfs12",value:d.policy_no,disabled:!0}),r.policy_no&&_.policy_no?u.a.createElement("span",{className:"errorMsg"},r.policy_no):null))),e.endorsement(d,r,_,c,m),d.newCount>0?e.additionalEndorsement(d,r,_,c,m):null,o&&o.endorsement_doc_id&&o.endorsement_doc_id.length>0?s&&s.length>0&&s.map((function(t,a){return u.a.createElement(f.a,{className:"row formSection",key:a},u.a.createElement("label",{className:"col-md-3"},i[a],":")," "==t?u.a.createElement("div",{className:"col-md-4"},u.a.createElement("input",{type:"file",key:a,name:"file",accept:".png, .jpeg, .jpg, .pdf",onChange:function(t){t.target.value.length>0&&e.onFileChange(t.target.files,m,c,a)}})):u.a.createElement("label",{className:"col-md-3"},t,":"),"discrepancy"==d.status?" "==t?u.a.createElement(E.a,{type:"button",onClick:function(){return e.upload()}},"Upload Document"):u.a.createElement(E.a,{type:"button",onClick:function(){return e.Delete(l[a])}},"Delete"):null)})):null,u.a.createElement(E.a,{className:"proceedBtn",type:"button",onClick:e.props.backButton},"Back"),"discrepancy"==d.status?u.a.createElement(E.a,{className:"proceedBtn",type:"submit",disabled:!!p},p?"Wait....":"Update"):null))}))))))}}]),a}(p.Component);t.a=Object(h.g)(Object(N.b)((function(e){return{loading:e.loader.loading}}),(function(e){return{loadingStart:function(){return e(Object(b.a)())},loadingStop:function(){return e(Object(b.b)())}}}))(I))},1175:function(e,t,a){"use strict";a.r(t);var n=a(15),d=a(13),o=a(14),r=a(18),s=a(17),l=a(0),i=a.n(l),m=a(377),c=a(903),p=a(904),u=a(31),_=a(34),f=(a(40),a(7)),E=a(38),g=a(19),v=a(22),y=a(3),h=a.n(y),b=(a(1),a(20)),N=a.n(b),S=a(9),w=a(2),k=a(919),O=a(918),F=a(1006),D={sr_no:""},C={fontSize:12};function I(e,t){return e&&e.requestdata&&e.requestdata.policyholder?e.requestdata.policyholder.first_name:null}function M(e,t){return e&&e.requestdata&&e.requestdata.policyholder&&e.requestdata.policyholder.vehiclebrandmodel&&e.requestdata.policyholder.vehiclebrandmodel.vehicletype?e.requestdata.policyholder.vehiclebrandmodel.vehicletype.name:null}var T=function(e){Object(r.a)(a,e);var t=Object(s.a)(a);function a(){var e;Object(d.a)(this,a);for(var o=arguments.length,r=new Array(o),s=0;s<o;s++)r[s]=arguments[s];return(e=t.call.apply(t,[this].concat(r))).state={permanent_list:[],list:[],sr_no:"",viewEndorsement:!1,endorsementdata_id:""},e.redirectLink=function(t,a){var n;n=a.info,e.setState({viewEndorsement:!0,endorsementdata_id:t,endorsementInfo:n})},e.backButton=function(){var t=e.state.viewEndorsement;e.setState({viewEndorsement:!t})},e.updateList=function(){var t=e.state.viewEndorsement;e.setState({viewEndorsement:!t}),e.getList()},e.forwardNextPage=function(){e.props.history.push("/AdditionalDetails_GSB/".concat(e.props.match.params.productId))},e.getStatus=function(t,a){var n=new FormData;n.append("endorsementdata_id",t),e.props.loadingStart(),f.a.post("dyi-endorsement/status",n).then((function(t){0==t.data.error?N()("Status :  ".concat(t.data.data.current_status)).then((function(t){t&&e.getList()})):(N()(t.data.msg),e.props.loadingStop())})).catch((function(t){return e.props.loadingStop()}))},e.getSearch=function(t){console.log("values search ------------- ",t.sr_no);var a=new FormData;a.append("sr_no",t.sr_no),e.props.loadingStart(),f.a.post("dyi-endorsement/search",a).then((function(t){0==t.data.error?(e.setState({list:t.data.data.endrosment,permanent_list:t.data.data.endrosment}),e.props.loadingStop()):(N()(t.data.msg),e.props.loadingStop())})).catch((function(t){return e.props.loadingStop()}))},e.getList=function(){var t=new S.a,a=new FormData,d=sessionStorage.getItem("users")?JSON.parse(sessionStorage.getItem("users")):"";d.user&&(d=JSON.parse(t.decrypt(d.user)),a.append("user_id",d.bc_master_id),4==d.login_type?5==d.bc_master_id?a.append("user_type","csc"):(a.append("user_type","bc"),a.append("agent_id",d.user_name)):a.append("user_type",d.user_type),e.props.loadingStart(),f.a.post("dyi-endorsement/list",a).then((function(t){e.setState(Object(n.a)(Object(n.a)({},e.state),{},{list:t.data.data.list,permanent_list:t.data.data.list})),e.props.loadingStop()})).catch((function(t){return e.props.loadingStop()})))},e}return Object(o.a)(a,[{key:"changePlaceHoldClassAdd",value:function(e){e.target.parentElement.classList.add("active")}},{key:"changePlaceHoldClassRemove",value:function(e){var t=e.target.parentElement;0===e.target.value.length&&t.classList.remove("active")}},{key:"componentDidMount",value:function(){this.getList()}},{key:"render",value:function(){var e,t=this.state,a=t.list,n=t.viewEndorsement,d=t.endorsementdata_id,o=t.endorsementInfo,r=(a&&a.length,{page:parseInt(1),sizePerPage:5,paginationShowsTotal:this.renderShowsTotal,prePage:"Prev",nextPage:"Next",hideSizePerPage:!0,showTotal:!0});return i.a.createElement(i.a.Fragment,null,i.a.createElement(u.a,null,i.a.createElement("div",{className:"page-wrapper"},i.a.createElement("div",{className:"container-fluid"},i.a.createElement("div",{class:"row"},i.a.createElement("aside",{className:"left-sidebar"},i.a.createElement("div",{className:"scroll-sidebar ps-container ps-theme-default ps-active-y"},i.a.createElement(_.a,null))),i.a.createElement("div",{className:"col-sm-12 col-md-12 col-lg-12 col-xl-12 infobox breakin"},1==n?i.a.createElement("div",null,i.a.createElement("h4",{className:"text-center mt-3 mb-3"},"Update Endorsement "),i.a.createElement(F.a,{endorsementdata_id:d,endorsementInfo:o,updateList:this.updateList,backButton:this.backButton})):i.a.createElement("div",null,i.a.createElement("h4",{className:"text-center mt-3 mb-3"},"View Endorsement "),i.a.createElement("div",{className:"contBox m-b-45 tickedTable"},i.a.createElement(w.e,{initialValues:D,onSubmit:this.getSearch},(function(e){e.values,e.errors,e.setFieldValue,e.setFieldTouched,e.isValid,e.isSubmitting,e.touched;return i.a.createElement(w.d,null,i.a.createElement(c.a,{className:"row formSection"},i.a.createElement(p.a,{sm:6,md:6,lg:4},i.a.createElement(w.b,{class:"form-control me-2",type:"text",placeholder:"Search Sr no","aria-label":"Search",name:"sr_no"})),i.a.createElement(p.a,{sm:6,md:6,lg:4},i.a.createElement(m.a,{class:"btn btn-outline-success",type:"submit"},"Search "))))})),i.a.createElement(c.a,null," \xa0 "),i.a.createElement("div",{className:"customInnerTable dataTableCustom"},i.a.createElement(k.BootstrapTable,{ref:"table",data:a,pagination:!0,options:r,wrapperClasses:"table-responsive"},i.a.createElement(k.TableHeaderColumn,{width:"30px",dataField:"sr_no",dataAlign:"center",isKey:!0,dataFormat:function(e,t,a,n){return n+1}},"Sr"),i.a.createElement(k.TableHeaderColumn,{width:"100px",dataField:"sr_no",dataAlign:"center"},"SR/R Number"),i.a.createElement(k.TableHeaderColumn,{width:"100px",dataField:"policydata",dataAlign:"center",dataFormat:I},"Customer Name"),i.a.createElement(k.TableHeaderColumn,{width:"150px",dataField:"policy_no",dataAlign:"center",dataSort:!0},"Policy Number"),i.a.createElement(k.TableHeaderColumn,{width:"150px",dataField:"policydata",dataAlign:"center",dataFormat:M}," Policy Product"),i.a.createElement(k.TableHeaderColumn,{width:"100px",dataField:"created_at",dataAlign:"center",dataFormat:function(e){return"0000-00-00 00:00:00"!==e?h()(e).add(5,"hours").add(30,"minutes").add(40,"seconds").format("DD-MM-YYYY HH:mm:ss a"):""}},"Date"),i.a.createElement(k.TableHeaderColumn,{width:"100px",dataField:"endorsement_status",dataAlign:"center"},"Status"),i.a.createElement(k.TableHeaderColumn,{width:"150px",dataField:"id",dataAlign:"center",dataFormat:(e=this,function(t,a){return i.a.createElement("div",null,i.a.createElement(O.a,{tooltip:"Click to view endorsement detail",href:"#",clicked:function(){return e.redirectLink(t,a)},id:"tooltip-1"},i.a.createElement(m.a,{type:"button",style:C},"View")),"\xa0")})},"Action")))))))))))}}]),a}(l.Component);t.default=Object(E.g)(Object(v.b)((function(e){return{loading:e.loader.loading}}),(function(e){return{loadingStart:function(){return e(Object(g.a)())},loadingStop:function(){return e(Object(g.b)())}}}))(T))},918:function(e,t,a){"use strict";var n=a(0),d=a.n(n),o=a(912),r=a(909),s=a(36);t.a=function(e){var t=e.id,a=e.children,n=e.href,l=e.tooltip,i=e.clicked;return d.a.createElement(o.a,{overlay:d.a.createElement(r.a,{id:t},l),placement:"top",delayShow:300,delayHide:150,trigger:["hover","focus"]},d.a.createElement(s.b,{to:n,onClick:i},a))}}}]);