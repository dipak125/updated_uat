(this["webpackJsonpmy-app"]=this["webpackJsonpmy-app"]||[]).push([[4],{1187:function(e,a,t){"use strict";t.r(a);var n=t(13),l=t(14),r=t(18),m=t(17),c=t(0),s=t.n(c),o=t(31),i=t(903),u=t(904),d=t(913),E=t(377),p=t(20),g=t.n(p),N=t(34),b=t(40),v=t(7),_=t(19),f=t(22),h=t(9),S=t(48),y=t.n(S),A=t(2),C=t(37),w=t.n(C),D=function(e){Object(r.a)(t,e);var a=Object(m.a)(t);function t(e){var l;return Object(n.a)(this,t),(l=a.call(this,e)).fetchBalanceAmount=function(){var e=new FormData,a=sessionStorage.getItem("users")?JSON.parse(sessionStorage.getItem("users")):"";if(a){var t=new h.a,n=(a=JSON.parse(t.decrypt(a.user))).master_user_id?a.master_user_id:null,r={user_id:n};e.append("enc_data",t.encrypt(JSON.stringify(r))),v.a.post("acd/acd-balance",e).then((function(e){var a=new h.a,t=JSON.parse(a.decrypt(e.data));1==t.error?g()("Unable to fetch amount",{icon:"error"}):l.setState({balanceAmount:t.data.balanceAmount}),l.props.loadingStop()})).catch((function(e){console.log(e),console.log("User Id","acd/acd-balance/".concat(n)),l.props.loadingStop()}))}},l.actionFormatter=function(e){""==e||void 0==e?l.setState({showError:!0}):window.open("".concat("https://uatcld.sbigeneral.in/sbig-bc","/razorpay/acd_pay.php?account_number=").concat(l.state.agentData.account_number,"&amount=").concat(e),"_self")},l.removeErrorMsg=function(){l.setState({showError:!1})},l.handleSubmit=function(){var e=new FormData,a=sessionStorage.getItem("users")?JSON.parse(sessionStorage.getItem("users")):"";if(a){var t=new h.a,n=(a=JSON.parse(t.decrypt(a.user))).master_user_id?a.master_user_id:null;console.log("User Id",n),e.append("user_id",n),v.a.post("acd/acd-create",e).then((function(e){if(console.log("RESPONSE ACD=>",e),0==e.data.error){var a=e.data.data.accountNumber;console.log("account_number",a),l.setState({account_number:a}),l.fetchACD(),g()(e.data.msg,{icon:"success"})}else g()(e.data.msg,{icon:"error"});l.props.loadingStop()})).catch((function(e){console.log(e),l.props.loadingStop()}))}},l.fetchACD=function(){var e=new FormData,a=sessionStorage.getItem("users")?JSON.parse(sessionStorage.getItem("users")):"";if(a){var t=new h.a,n=(a=JSON.parse(t.decrypt(a.user))).master_user_id?a.master_user_id:null;e.append("user_id",n),v.a.post("acd/acd-agent",e).then((function(e){0==e.error||l.setState({agentData:e.data.data}),l.props.loadingStop()})).catch((function(e){console.log(e),l.props.loadingStop()}))}},l.paymentmesg=function(){var e=w.a.parse(l.props.location.search).status;"pay_cancel"==e||"pay_fail"==e?(g()("Something went wrong.",{icon:"error"}),l.props.history.push("/AgentCashDeposit/")):"pay_success"==e&&(g()("Successfully cash deposited.",{icon:"success"}),l.props.history.push("/AgentCashDeposit/"))},l.state={agentData:[],toggleACD:!0,account_number:"",balanceAmount:"",showError:!1},l}return Object(l.a)(t,[{key:"componentDidUpdate",value:function(){}},{key:"componentDidMount",value:function(){this.fetchACD(),this.paymentmesg()}},{key:"render",value:function(){var e=this,a=this.state,t=a.agentData,n=a.toggleACD,l=a.account_number,r=a.balanceAmount,m=a.showError;console.log("tettetette",t);var c={agreement_code:t.agreement_code,intermediary_code:t.intermediary_code,user_name:t.intermediary_name,credit_date:t.credit_date},p=localStorage.getItem("phrases")?JSON.parse(localStorage.getItem("phrases")):null;return s.a.createElement(o.a,null,s.a.createElement("div",{className:"page-wrapper"},s.a.createElement("div",{className:"container-fluid"},s.a.createElement("div",{className:"row"},s.a.createElement("aside",{className:"left-sidebar"},s.a.createElement("div",{className:"scroll-sidebar ps-container ps-theme-default ps-active-y"},s.a.createElement(N.a,null))),s.a.createElement("div",{className:"col-sm-12 col-md-12 col-lg-12 col-xl-12 infobox"},s.a.createElement("h4",{className:"text-center mt-3 mb-3"},p.SBIGICL),s.a.createElement("div",{className:"contBox m-b-45 tickedTable"},s.a.createElement("h4",{className:"text-center mt-3 mb-3"},"Agent Cash Deposit"),s.a.createElement(A.e,{initialValues:c,onSubmit:this.handleSubmit,enableReinitialize:!0},(function(a){var c=a.values;a.errors,a.setFieldValue,a.setFieldTouched,a.touched;return s.a.createElement(A.d,null,s.a.createElement("div",{className:"rghtsideTrigr collinput W-90 m-b-30 collaps_area"},s.a.createElement(y.a,{openedClassName:"custom_ovberflow",trigger:"Create ACD",open:n},s.a.createElement("div",{className:"listrghtsideTrigr"},s.a.createElement(i.a,null,s.a.createElement(u.a,{sm:12,md:12,lg:10},s.a.createElement(i.a,null,s.a.createElement(u.a,{sm:12,md:6,lg:4},s.a.createElement(d.a,null,s.a.createElement("div",{className:"insurerName"},s.a.createElement("span",{className:"fs-16"},"Agent Code")))),s.a.createElement(u.a,{sm:12,md:6,lg:4},s.a.createElement(d.a,null,s.a.createElement("div",{className:"insurerName"},s.a.createElement(A.b,{name:"intermediary_code",type:"text",className:"premiumslid",value:c.intermediary_code,disabled:!0})))),s.a.createElement(u.a,{sm:12,md:3,lg:2},"\xa0")),s.a.createElement(i.a,null,s.a.createElement(u.a,{sm:12,md:6,lg:4},s.a.createElement(d.a,null,s.a.createElement("div",{className:"insurerName"},s.a.createElement("span",{className:"fs-16"},"Agent Name")))),s.a.createElement(u.a,{sm:12,md:6,lg:4},s.a.createElement(d.a,null,s.a.createElement("div",{className:"insurerName"},s.a.createElement(A.b,{name:"user_name",type:"text",className:"premiumslid",value:c.user_name,disabled:!0})))),s.a.createElement(u.a,{sm:12,md:3,lg:2},"\xa0")),s.a.createElement(i.a,null,s.a.createElement(u.a,{sm:12,md:6,lg:4},s.a.createElement(d.a,null,s.a.createElement("div",{className:"insurerName"},s.a.createElement("span",{className:"fs-16"},"Agreement Code")))),s.a.createElement(u.a,{sm:12,md:6,lg:4},s.a.createElement(d.a,null,s.a.createElement("div",{className:"insurerName"},s.a.createElement(A.b,{name:"agreement_code",type:"text",className:"premiumslid",value:c.agreement_code,disabled:!0})))),s.a.createElement(u.a,{sm:12,md:3,lg:2},"\xa0")),s.a.createElement(i.a,null,s.a.createElement(u.a,{sm:12,md:6,lg:4},s.a.createElement(d.a,null,s.a.createElement("div",{className:"insurerName"},s.a.createElement("span",{className:"fs-16"},"Credit date")))),s.a.createElement(u.a,{sm:12,md:6,lg:4},s.a.createElement(d.a,null,s.a.createElement("div",{className:"insurerName"},s.a.createElement(A.b,{name:"credit_date",type:"text",className:"premiumslid",value:c.credit_date,disabled:!0})))),s.a.createElement(u.a,{sm:12,md:3,lg:2},"\xa0")),s.a.createElement(i.a,null,"\xa0",s.a.createElement(u.a,{sm:12,md:6,lg:5},"\xa0"),""===t.account_number?s.a.createElement(u.a,{sm:12,md:4,lg:4},s.a.createElement(E.a,{className:"proceedBtn",type:"submit"},"Create ACD")):null))),s.a.createElement(i.a,null,s.a.createElement(u.a,null,"\xa0")))),s.a.createElement(y.a,{openedClassName:"custom_ovberflow",trigger:"Amount deposit in ACD account",open:!1},s.a.createElement("div",{className:"listrghtsideTrigr"},s.a.createElement(i.a,null,s.a.createElement(u.a,{sm:12,md:12,lg:10},s.a.createElement(i.a,null,s.a.createElement(u.a,{sm:12,md:6,lg:4},s.a.createElement(d.a,null,s.a.createElement("div",{className:"insurerName"},s.a.createElement("span",{className:"fs-16"},"ACD Account Number")))),s.a.createElement(u.a,{sm:12,md:6,lg:4},s.a.createElement(d.a,null,s.a.createElement("div",{className:"insurerName"},s.a.createElement(A.b,{name:"acd_account_no",type:"text",className:"premiumslid",value:t.account_number?t.account_number:l,readOnly:!0})))),s.a.createElement(u.a,{sm:12,md:3,lg:2},"\xa0")),s.a.createElement(i.a,null,s.a.createElement(u.a,{sm:12,md:6,lg:4},s.a.createElement(d.a,null,s.a.createElement("div",{className:"insurerName"},s.a.createElement("span",{className:"fs-16"},"Amount want to add")))),s.a.createElement(u.a,{sm:12,md:6,lg:4},s.a.createElement(d.a,null,s.a.createElement("div",{className:"insurerName"},s.a.createElement(A.b,{name:"acd_amount",type:"text",className:"premiumslid",value:c.acd_amount,onKeyPress:e.removeErrorMsg}),m?s.a.createElement("span",{className:"errorMsg"},"Please enter amount"):null))),s.a.createElement(u.a,{sm:12,md:3,lg:2},"\xa0")),s.a.createElement(i.a,null,"\xa0",s.a.createElement(u.a,{sm:12,md:6,lg:5},"\xa0"),s.a.createElement(u.a,{sm:12,md:3,lg:2},s.a.createElement(E.a,{className:"proceedBtn",onClick:function(){e.actionFormatter(c.acd_amount)}},"Pay Now"))))),s.a.createElement(i.a,null,s.a.createElement(u.a,null,"\xa0")))),s.a.createElement(y.a,{openedClassName:"custom_ovberflow",trigger:"Balance Amount in ACD account",open:!1},s.a.createElement("div",{className:"listrghtsideTrigr"},s.a.createElement(i.a,null,s.a.createElement(u.a,{sm:12,md:12,lg:10},s.a.createElement(i.a,null,s.a.createElement(u.a,{sm:12,md:6,lg:4},s.a.createElement(d.a,null,s.a.createElement("div",{className:"insurerName"},s.a.createElement("span",{className:"fs-16"},"Amount")))),s.a.createElement(u.a,{sm:12,md:6,lg:4},s.a.createElement("span",null,r)),s.a.createElement(u.a,{sm:12,md:3,lg:2},"\xa0")),s.a.createElement(i.a,null,"\xa0",s.a.createElement(u.a,{sm:12,md:6,lg:5},"\xa0"),s.a.createElement(u.a,{sm:12,md:3,lg:4},s.a.createElement(E.a,{className:"proceedBtn",onClick:e.fetchBalanceAmount},"Balance Credit limit"))))),s.a.createElement(i.a,null,s.a.createElement(u.a,null,"\xa0"))))))})),s.a.createElement(i.a,null,"\xa0"))),s.a.createElement(b.a,null)))))}}]),t}(c.Component);a.default=Object(f.b)((function(e){return{loading:e.loader.loading}}),(function(e){return{loadingStart:function(){return e(Object(_.a)())},loadingStop:function(){return e(Object(_.b)())}}}))(D)}}]);